<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–¢–æ–≤–∞—Ä—ã</title>
  <link rel="stylesheet" href="../styles/styles.css" />
</head>
<body>
  <button id="theme-toggle">üåô / ‚òÄÔ∏è</button>

  <header class="header">
    <h1>–¢–æ–≤–∞—Ä—ã</h1>
    <button id="cart-toggle">
      üõí
      <span id="cart-count-badge">0</span>
    </button>
    <nav>
      <ul class="nav-list">
        <li><a href="../index.html">–ì–ª–∞–≤–Ω–∞—è</a></li>
        <li><a href="news.html">–ù–æ–≤–æ—Å—Ç–∏</a></li>
        <li><a href="practices.html">–ü—Ä–∞–∫—Ç–∏–∫–∏</a></li>
        <li><a href="goods.html">–¢–æ–≤–∞—Ä—ã</a></li>
        <li><a href="contacts.html">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <section class="products-grid">
      <article class="product-card">
        <img src="../images/goods1.jpg" alt="–¢–æ–≤–∞—Ä 1" />
        <h3>–ó–≤—ë–∑–¥–Ω–∞—è –ª–∞–º–ø–∞</h3>
        <p>–°–≤–µ—Ç–æ–¥–∏–æ–¥–Ω—ã–π –Ω–æ—á–Ω–∏–∫ —Å —ç—Ñ—Ñ–µ–∫—Ç–æ–º –∑–≤—ë–∑–¥–Ω–æ–≥–æ –Ω–µ–±–∞.</p>
        <div class="card-price">1490‚ÇΩ</div>
        <button>–ö—É–ø–∏—Ç—å</button>
      </article>
      <article class="product-card">
        <img src="../images/goods2.jpg" alt="–¢–æ–≤–∞—Ä 2" />
        <h3>–ö—Ä—É–∂–∫–∞-–≥–µ–π–∑–µ—Ä</h3>
        <p>–¢–µ—Ä–º–æ–∫—Ä—É–∂–∫–∞ —Å —ç—Ñ—Ñ–µ–∫—Ç–æ–º –º–µ–Ω—è—é—â–µ–≥–æ—Å—è —Ü–≤–µ—Ç–∞.</p>
        <div class="card-price">790‚ÇΩ</div>
        <button>–ö—É–ø–∏—Ç—å</button>
      </article>
      <article class="product-card">
        <img src="../images/goods3.jpg" alt="–¢–æ–≤–∞—Ä 3" />
        <h3>–ü–ª–µ–¥-—Å–≤–µ—Ç–ª—è—á–∫–∏</h3>
        <p>–ú—è–≥–∫–∏–π –ø–ª–µ–¥ —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π –¥–ª—è —É—é—Ç–Ω—ã—Ö –≤–µ—á–µ—Ä–æ–≤.</p>
        <div class="card-price">2190‚ÇΩ</div>
        <button>–ö—É–ø–∏—Ç—å</button>
      </article>
    </section>
  </main>

  <footer class="footer">
    <p>¬© 2025 –ï–≤—Ç—É—à–µ–Ω–∫–æ –ì–æ—Ä–¥–µ–π</p>
  </footer>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∫–æ—Ä–∑–∏–Ω—ã -->
  <div id="cart-modal" class="cart-modal">
    <div class="cart-content">
      <h2>–ö–æ—Ä–∑–∏–Ω–∞</h2>
      <button id="close-cart">&times;</button>
      <ul id="cart-items"></ul>
      <div id="cart-total">–ò—Ç–æ–≥–æ: 0‚ÇΩ</div>
      <button id="checkout-btn">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
    </div>
  </div>

  <!-- –ü–æ–¥–ª–æ–∂–∫–∞ -->
  <div id="cart-overlay" class="cart-overlay"></div>

  <script src="../scripts/theme.js"></script>
  <script>
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ—Ä–∑–∏–Ω—ã
    let cart = JSON.parse(localStorage.getItem('cart')) || [];

    function updateCartCount() {
      const count = cart.reduce((sum, item) => sum + item.quantity, 0);
      document.getElementById('cart-count-badge').textContent = count;
    }

    function renderCart() {
      const cartList = document.getElementById('cart-items');
      cartList.innerHTML = '';
      let total = 0;

      cart.forEach(item => {
        const li = document.createElement('li');
        li.innerHTML = `
          <div class="cart-item-info">
            <div class="cart-item-image"></div>
            <div class="cart-item-details">
              <div class="cart-item-name">${item.name}</div>
              <div class="cart-item-price">${item.price}‚ÇΩ √ó ${item.quantity}</div>
            </div>
          </div>
          <button class="remove-item" data-id="${item.id}">√ó</button>
        `;
        cartList.appendChild(li);
        total += item.price * item.quantity;
      });

      document.getElementById('cart-total').textContent = `–ò—Ç–æ–≥–æ: ${total}‚ÇΩ`;
    }

    function addToCart(name, price, image = null) {
      const existing = cart.find(item => item.name === name);
      if (existing) {
        existing.quantity++;
      } else {
        cart.push({
          id: Date.now(),
          name,
          price,
          quantity: 1,
          image
        });
      }
      localStorage.setItem('cart', JSON.stringify(cart));
      updateCartCount();
    }

    function removeFromCart(id) {
      cart = cart.filter(item => item.id !== id);
      localStorage.setItem('cart', JSON.stringify(cart));
      renderCart();
      updateCartCount();
    }

    document.addEventListener('DOMContentLoaded', () => {
      updateCartCount();
      renderCart();

      // –ö–Ω–æ–ø–∫–∏ "–ö—É–ø–∏—Ç—å"
      document.querySelectorAll('.product-card button').forEach(btn => {
        btn.addEventListener('click', () => {
          const card = btn.closest('.product-card');
          const name = card.querySelector('h3').textContent;
          const priceText = card.querySelector('.card-price').textContent;
          const price = parseInt(priceText.replace('‚ÇΩ', ''));
          addToCart(name, price);
          alert(`${name} –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É!`);
        });
      });

      // –û—Ç–∫—Ä—ã—Ç–∏–µ/–∑–∞–∫—Ä—ã—Ç–∏–µ –∫–æ—Ä–∑–∏–Ω—ã
      document.getElementById('cart-toggle').addEventListener('click', () => {
        document.getElementById('cart-modal').classList.add('active');
        document.getElementById('cart-overlay').classList.add('active');
      });

      document.getElementById('close-cart').addEventListener('click', () => {
        document.getElementById('cart-modal').classList.remove('active');
        document.getElementById('cart-overlay').classList.remove('active');
      });

      document.getElementById('cart-overlay').addEventListener('click', () => {
        document.getElementById('cart-modal').classList.remove('active');
        document.getElementById('cart-overlay').classList.remove('active');
      });

      // –£–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
      document.addEventListener('click', e => {
        if (e.target.classList.contains('remove-item')) {
          const id = Number(e.target.dataset.id);
          removeFromCart(id);
        }
      });
    });
  </script>
</body>
</html>